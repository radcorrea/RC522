PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE cadastro (UID TEXT UNIQUE, name TEXT UNIQUE);
INSERT INTO cadastro VALUES('E1 34 5F A1','RAFAEL');
INSERT INTO cadastro VALUES('A1 BC F4 DE','FULANO');
INSERT INTO cadastro VALUES('AA BB CC DD EE','MAURICIO');
INSERT INTO cadastro VALUES('BB CC DD EE','TANAKA');
CREATE TABLE leitura (UID TEXT UNIQUE, data DATE, hora TIME UNIQUE, credito INTEGER);
INSERT INTO leitura VALUES('E1 34 5F A1','2018-11-19','22:41:18',8);
INSERT INTO leitura VALUES('A1 BC F4 DE','2018-11-19','23:18:06',4);
INSERT INTO leitura VALUES('AA BB CC DD EE','2018-11-20','22:17:48',32);
INSERT INTO leitura VALUES('BB CC DD EE','2018-11-20','22:19:49',16);
CREATE TABLE apresentacao(id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, id_cadastro TEXT, id_leitura TEXT ,FOREIGN KEY(id_cadastro) REFERENCES cadastro(UID), FOREIGN KEY(id_leitura) REFERENCES leitura(UID));
INSERT INTO apresentacao VALUES(1,'E1 34 5F A1','E1 34 5F A1');
INSERT INTO apresentacao VALUES(2,'A1 BC F4 DE','A1 BC F4 DE');
INSERT INTO apresentacao VALUES(3,'AA BB CC DD EE','AA BB CC DD EE');
INSERT INTO apresentacao VALUES(4,'BB CC DD EE','BB CC DD EE');
DELETE FROM sqlite_sequence;
INSERT INTO sqlite_sequence VALUES('apresentacao',4);
CREATE UNIQUE INDEX idx_leitura ON leitura (UID ,data , hora);
COMMIT;
